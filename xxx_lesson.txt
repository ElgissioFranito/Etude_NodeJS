    ------------------------------------------------------------------------------------
----------------------------  APPRENDRE NODE.JS - SIMON DIENY -------------------------------
    ------------------------------------------------------------------------------------

A - th√©orie sur l'√©cosyst√®me de NodeJS


B - Pratique
    Premier pas: 
    - t√©l√©charger et installer nodeJS LTS
    - t√©l√©charger et installer npm LTS (s'il n'est pas encore installer avec nodeJS)
    - t√©l√©charger et installer un √©diteur de texte (VScode,...)

    I - Premier pas sur nodeJS
        - Il faut cr√©er un dossier(nomProjet = Etude_NodeJS) qui a un fichier 
        javaScript(app.js, main.js, index.js, server.js) qui est le point d'entr√©e 
        de notre application. Il contiendra just:
        console.log('Hello Node üòò')

        - ensuite executer dans le terminal: (assurez-vous √™tre dans le dossier /nomProjet)
            $ node app.js


    II - package.json
        - il s'agit d'un fichier qu'on trouve g√©n√©ralement dans tous les projets javaScript.
        - 02 r√¥les: 
            => description de l'application (nom, version, licence, auteur,...)
            => lister toutes les d√©pendances de l'application et leurs d√©pendances
            bonus: scripter pour automatiser certains taches
                ex : dans scripts, dans package.json on peut mettre:
                "scripts" : {
                    "nomScript": "node app.js"
                },
                on peut executer "node app.js" comme alias "npm run nomScript"

        - cr√©er un fichier package.json
        - on peut cr√©er un fichier package.json √† la main ou avec la commande npm:
            $ npm init              // et r√©pondre √† plusieurs questions

    
    III - ExpressJS
    C'est quoi?
        - c'est le framework le plus populaire pour cr√©er un API Rest avec NodeJS
    
    Comment utiliser?
        - pour l'installer: npm install express 
        - Express se trouve dans le "node_modules" l√† o√π tous les librairies sont t√©l√©charg√©, install√©
        et on est recommander de ne pas modifier qlq chose. (NB: tous les librairies install√©s dans le projet sont inscrit 
        dans package.json dans l'objet "dependencies")

        - dans le fichier app.js, on peut changer en:
            const express = require('express');         // aller chercher express dans le node_modules

            const app = express();                      // cr√©er un server web de l'api
            const port = 3000;                          // le port ou on va d√©marrer notre api

            app.get('/', (req, res) => res.send("Hello Express üòö !!"));    // endpoint

            app.listen(port,                                      // on d√©marre l'api sur le port 3000, et on affiche un message sur le terminal
            () => console.log
            (`notre application d√©marre sur : http://localhost:${port}`));

        c'est le stricte minimum pour √©crire in code express

        - endpoint : c'est le coeur de l'express 
            -> get : c'est la m√©thode de la request (get, post, put, delete,...) qui prend 02 params(route, fonction)
            -> '/' : c'est la route de la request ('/home', '/search', '/createPersonne',...)
            -> (req, res) => {} : c'est une fonction fl√©ch√© qui prend 02 params 
                req : request (r√©cup√®re la requ√™te du client)
                res : response (objet qu'on va renvoyer au client)
        - en faisant node app.js, et si on change quelque chose dans le code apr√®s, on ne va pas voir de changement dans l'execution
        car on doit red√©marrer le server (Ctrl+C ensuite node app.js) pour voir le changement


    IV - Nodemon
        - c'est un module de nodeJS qui a pour principe de red√©marrer le server de l'api √† chaque changement dans node code
        - pour l'installer: npm install nodemon --save-dev
        - pour l'executer: nodemon app.js (on peut aussi just changer le script dans package.json en 
                                            "nomScript": "nodemon app.js" )


    V - Routes
        - On utilise les routes pour cr√©er des nouvels points de terminaison (endpoint = http://localhost/pokemon/1)
        - une route = app.METHODEhttp("/ROUTE",FONCTIONgestionnaire(request,response))
                    express() . [get,post,put,delete // toujours en miniscule] ("/accueil", (req,res) => res.send("haha")) 

        exemples des routes avec express:
        - app.get('/pokemon/1',(req,res) => res.send("Les informations du Pokemon n¬∞1!")),
        - app.get('/pokemons',(req,res) => res.send("Vous voulez r√©cup√©rer tout les pokemons")),
        - app.post('/pokemon',(req,res) => res.send("Vous venez d'\ajouter un nouveau Pokemon au pok√©dex")),
        - app.put('/pokemon/1',(req,res) => res.send("Vous souhaitez modifier le Pokemon n¬∞1")),
        - app.delete('/pokemon/1',(req,res) => res.send("Le Pokemon n¬∞1 vient d'\√™tre supprim√©s")),
        - app.delete('/pokemons',(req,res) => res.send("Oh, mince ! Vous venez de supprimer tous les Pokemon")),
        

    V - Passer un param√®tre dans un endpoint
        - C'est utile pour rendre dynamique une route et ne pas cr√©er une route par tous les enregistrement (ex: pokemons) 

        - pour le faire, il faut juste ajouter un ":" devant le nom du param√®tre dans la route        
            app.get('/pokemon/:id',(req,res) => {
                const identifiant = req.params.id;
                res.send(`vous avez demander le pokemon n¬∞${identifiant}`);
            });

        - passer plusieurs param√®tres dans un endpoint et r√©cup√©rer un donn√©e:      
            app.get('/pokemon/:id/:name',(req,res) => {
                const identifiant = req.params.id;                        
                const name = req.params.name;
                res.send(`vous avez demander le pokemon n¬∞${identifiant} qui s‚Äôappelle ${name}`);
            });

        - r√©cup√©rer un donn√©e dans un fichier:
            const express = require("express");
            let pokemons = require(./data-pokemon);        // s'il y a un fichier data-pokemon dans le dossier actuel

            const app = express();
            const port = 3000;

            app.get("/api/pokemon/:id", (req, res) => {
                // const identifiant = req.params.id;               // Retourne "undefined" s'il y a un donn√©e li√© au programme, car "id" est de types
                const identifiant = parseInt(req.params.id);         // Penser bien √† parseInt(), car les params de l'URL sont toujours des "String"         
    
                const pokemon = pokemons.find(pokemon => pokemon.id === identifiant);
                res.send(`Vous avez demander le pokemon ${pokemon.name}`);
            });

            app.listen(port, () => consol.log(`Notre application est d√©marr√©e sur : http:://localhost:${port}`));
            
        - r√©cup√©rer tous les donn√©e dans un tableau:
            app.get("/api/pokemons", (req, res) => {
                res.send(`Le nombre total des pokemons dans le pok√©dex est ${pokemons.lenght}`);
            });
